(this.webpackJsonpmatch=this.webpackJsonpmatch||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a(22)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),r=a(8),o=a.n(r),s=(a(15),a(2)),l=a(3),c=a(1),u=a(4),d=a(5),h=(a(16),{display:"none"}),v=function(){return n.a.createElement("svg",{width:"64",height:"64",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:h},n.a.createElement("defs",null,n.a.createElement("g",{id:"alpha",fill:"none"},n.a.createElement("circle",{cx:"32",cy:"32",r:"24",stroke:"currentColor",strokeWidth:"4"}),n.a.createElement("circle",{cx:"32",cy:"32",r:"16",stroke:"currentColor",strokeWidth:"4"})),n.a.createElement("path",{id:"beta",d:"M48 12L16 52h32L16 12h32z",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),n.a.createElement("path",{id:"gamma",d:"M34 16a2 2 0 10-4 0h4zM8 38a2 2 0 100 4v-4zm48 4a2 2 0 100-4v4zm-5.59-17.59a2 2 0 10-2.82-2.82l2.82 2.82zm-34-2.82a2 2 0 10-2.82 2.82l2.82-2.82zM8 42h24v-4H8v4zm24 0h24v-4H32v4zm0-16c3.87 0 7.36 1.56 9.9 4.1l2.83-2.83A17.95 17.95 0 0032 22v4zm9.9 4.1A13.95 13.95 0 0146 40h4c0-4.97-2.02-9.47-5.27-12.73L41.9 30.1zm2.83 0l5.68-5.69-2.82-2.82-5.69 5.68 2.83 2.83zM18 40c0-3.87 1.56-7.36 4.1-9.9l-2.83-2.83A17.95 17.95 0 0014 40h4zm4.1-9.9A13.95 13.95 0 0132 26v-4c-4.97 0-9.47 2.02-12.73 5.27l2.83 2.83zm0-2.83l-5.69-5.68-2.82 2.82 5.68 5.69 2.83-2.83zM34 24v-8h-4v8h4z",fill:"currentColor"}),n.a.createElement("path",{id:"delta",d:"M32 12l1.41-1.41a2 2 0 00-2.82 0L32 12zM12 32l-1.41-1.41a2 2 0 000 2.82L12 32zm20 20l-1.41 1.41a2 2 0 002.82 0L32 52zm20-20l1.41 1.41a2 2 0 000-2.82L52 32zM30.59 10.59l-20 20 2.82 2.82 20-20-2.82-2.82zm-20 22.82l20 20 2.82-2.82-20-20-2.82 2.82zm22.82 20l20-20-2.82-2.82-20 20 2.82 2.82zm20-22.82l-20-20-2.82 2.82 20 20 2.82-2.82zM30 12v40h4V12h-4z",fill:"currentColor"})))},p=a(6);a(17);function f(e,t,a){var i=e[t];return null!=i?i[a]:void 0}function m(e,t,a,i){var n=e[t];null==n&&(e[t]={},n=e[t]);var r=n[a];return n[a]=i,r}function y(e,t){for(var a in e){var i=e[a];for(var n in i){var r=i[n];null!=r&&t(parseInt(a),parseInt(n),r)}}}var g=function(){function e(t,a,i,n){Object(s.a)(this,e),this.currentState=void 0,this.generator=void 0,this.allowedMoves=void 0,this.matchRules=void 0,this.currentState=t,this.generator=a,this.allowedMoves=i,this.matchRules=n.sort((function(e,t){return t.priority-e.priority}))}return Object(l.a)(e,[{key:"initialize",value:function(){for(console.time();!this.currentState.settled;)this.tick();this.currentState.totalScore=0,this.currentState.score=0,this.currentState.multiplier=0,this.currentState.destroyedThisTick=[],console.timeEnd()}},{key:"move",value:function(e,t){var a=this;return!(!0!==this.currentState.settled||!this.allowedMoves.some((function(i){return i(e,t,a.currentState)})))&&(function(e,t,a,i,n){var r=f(e,t,a);m(e,t,a,f(e,i,n)),m(e,i,n,r)}(this.currentState.pieces,e.x,e.y,t.x,t.y),this.currentState.settled=!1,!0)}},{key:"tick",value:function(){var e=this,t=this.state,a=JSON.stringify(t),i=this.state,n=!0;i.destroyedLastTick=i.destroyedThisTick,i.destroyedThisTick=[];var r={};return y(i.board,(function(e,t){if(null==f(i.pieces,e,t))for(;null!=f(i.board,e,t);)m(r,e,t,!0),t-=1})),y(r,(function(a,r){null!=f(i.board,a,r-1)?m(i.pieces,a,r,f(t.pieces,a,r-1)):m(i.pieces,a,r,e.generator({x:a,y:r})),n=!1})),n&&this.matchRules.forEach((function(e){JSON.stringify(i);i=e.apply(i),JSON.stringify(i)})),i.settled=JSON.stringify(i)===a,i.settled&&(i.totalScore+=i.score*i.multiplier,i.score=0,i.multiplier=0),this.currentState=i,Object.assign({},this.currentState)}},{key:"state",get:function(){return JSON.parse(JSON.stringify(this.currentState))}}]),e}();function b(e,t){for(var a=arguments.length,i=new Array(a>2?a-2:0),n=2;n<a;n++)i[n-2]=arguments[n];var r=e.pieces;return y(e.board,(function(a,n){var o=f(r,a,n);if(null!=o){var s,l=o.type,c=Object(p.a)(i);try{for(c.s();!(s=c.n()).done;){var u=s.value,d=f(r,a+u.x,n+u.y);if(null==d||d.type!==l)return}}catch(b){c.e(b)}finally{c.f()}var h,v=Object(p.a)(i);try{for(v.s();!(h=v.n()).done;){var y=h.value,g=m(e.pieces,a+y.x,n+y.y,void 0);m(e.destroyedThisTick,a+y.x,n+y.y,g)}}catch(b){v.e(b)}finally{v.f()}e.score+=t,e.multiplier+=1}})),e}var S=[{priority:.2,apply:function(e){return b(e,500,{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0},{x:0,y:0}),e}},{priority:.2,apply:function(e){return b(e,500,{x:0,y:-4},{x:0,y:-3},{x:0,y:-2},{x:0,y:-1},{x:0,y:0}),e}},{priority:.1,apply:function(e){return b(e,300,{x:-3,y:0},{x:-2,y:0},{x:-1,y:0},{x:0,y:0}),e}},{priority:.1,apply:function(e){return b(e,300,{x:0,y:-3},{x:0,y:-2},{x:0,y:-1},{x:0,y:0}),e}},{priority:0,apply:function(e){return b(e,100,{x:-2,y:0},{x:-1,y:0},{x:0,y:0}),e}},{priority:0,apply:function(e){return b(e,100,{x:0,y:-2},{x:0,y:-1},{x:0,y:0}),e}}],E=[function(e,t,a){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)===1&&(null!=f(a.pieces,e.x,e.y)&&null!=f(a.pieces,t.x,t.y))}],k=a(24),w=a(9),x=a.n(w),O={alpha:{type:"alpha",icon:"alpha",baseColor:"#4791ff"},beta:{type:"beta",icon:"beta",baseColor:"#FFB800"},gamma:{type:"gamma",icon:"gamma",baseColor:"#EB00FF"},delta:{type:"delta",icon:"delta",baseColor:"#00FFC2"}},j=Object.keys(O);var M=function(e){var t=x()(e);return function(){var e=Math.floor(t()*j.length);return{id:Object(k.a)(),type:j[e]}}}(),R={title:"Base Level Pack",levels:[{title:"Classic",description:'"Wait, how is there a classic mode if this game was just created?"',generate:function(){return new g({board:{0:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},1:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},2:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},3:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},4:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},5:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0}},totalScore:0,score:0,multiplier:0,pieces:[],destroyedThisTick:[],destroyedLastTick:[],settled:!1},M,E,S)}},{title:"Doughnut",description:"Who doesn't love the holiest of foods?",generate:function(){return new g({board:{0:{2:!0,3:!0,4:!0,5:!0,6:!0},1:{1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0},2:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0},3:{0:!0,1:!0,2:!0,6:!0,7:!0,8:!0},4:{0:!0,1:!0,2:!0,6:!0,7:!0,8:!0},5:{0:!0,1:!0,2:!0,6:!0,7:!0,8:!0},6:{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0},7:{1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0},8:{2:!0,3:!0,4:!0,5:!0,6:!0}},totalScore:0,score:0,multiplier:0,pieces:[],destroyedThisTick:[],destroyedLastTick:[],settled:!1},M,E,S)}},{title:"Doughnut Hole",description:"We're not going to waste any dough.",generate:function(){return new g({board:{0:{1:!0,2:!0,3:!0},1:{0:!0,1:!0,2:!0,3:!0,4:!0},2:{0:!0,1:!0,2:!0,3:!0,4:!0},3:{0:!0,1:!0,2:!0,3:!0,4:!0},4:{1:!0,2:!0,3:!0}},totalScore:0,score:0,multiplier:0,pieces:[],destroyedThisTick:[],destroyedLastTick:[],settled:!1},M,E,S)}}]},C=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(s.a)(this,a),(i=t.call(this,e)).state={packs:[R]},i}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this,a=[],i=Object(p.a)(this.state.packs);try{for(i.s();!(e=i.n()).done;){var r,o=e.value,s=[],l=Object(p.a)(o.levels);try{var c=function(){var e=r.value;s.push(n.a.createElement("li",{key:"".concat(o.title," ").concat(e.title),onClick:function(){return t.props.activate(e)}},n.a.createElement("h3",null,e.title),n.a.createElement("p",null,e.description)))};for(l.s();!(r=l.n()).done;)c()}catch(u){l.e(u)}finally{l.f()}a.push(n.a.createElement("div",{key:o.title,className:"pack"},n.a.createElement("h2",null,o.title),n.a.createElement("ol",null,s)))}}catch(u){i.e(u)}finally{i.f()}return n.a.createElement("div",{className:"LevelBrowser"},a)}}]),a}(n.a.Component),N=(a(19),a(20),a(21),function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(s.a)(this,a),(i=t.call(this,e)).state={visible:!1},i}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.setTimeout((function(){e.setState({visible:!0})}),100)}},{key:"render",value:function(){var e=this,t=this.props.scale,a={color:this.props.color,height:t,left:this.props.x*t+"px",top:this.props.y*t+"px",width:t},i="#"+this.props.icon,r=["Piece"];return this.state.visible||r.push("hidden"),this.props.selected&&r.push("selected"),this.props.destroyed&&r.push("destroyed"),n.a.createElement("div",{className:r.join(" "),style:a,onMouseDown:function(t){return e.props.actionDown(t.nativeEvent)},onMouseMove:function(t){return e.props.actionMove(t.nativeEvent)},onMouseUp:this.props.actionUp,onTouchStart:function(t){return e.props.actionDown(t.nativeEvent)},onTouchMove:function(t){return e.props.actionMove(t.nativeEvent)},onTouchEnd:this.props.actionUp},n.a.createElement("svg",{width:"64",height:"64",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},n.a.createElement("use",{xlinkHref:i})))}}]),a}(n.a.Component)),B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;Object(s.a)(this,a),(i=t.call(this,e)).boardRef=void 0,i.gridRef=void 0,i.boardRef=n.a.createRef(),i.gridRef=n.a.createRef();var r=-1/0,o=1/0,l=-1/0,u=1/0;return y(i.props.gameState.board,(function(e,t){r=Math.max(e,r),l=Math.max(t,l),o=Math.min(e,o),u=Math.min(t,u)})),i.state={lastCoordinates:void 0,scale:64,translateX:0,translateY:0,gridWidth:r-o+1,gridHeight:l-u+1},i.onStart=i.onStart.bind(Object(c.a)(i)),i.onMove=i.onMove.bind(Object(c.a)(i)),i.onEnd=i.onEnd.bind(Object(c.a)(i)),i.onResize=i.onResize.bind(Object(c.a)(i)),i}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize),this.onResize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize)}},{key:"onStart",value:function(e){if(e instanceof MouseEvent)this.props.onStart(this.toGridSpace(e.clientX,e.clientY));else{var t=e.touches[0];this.props.onStart(this.toGridSpace(t.clientX,t.clientY))}}},{key:"onMove",value:function(e){if(e instanceof MouseEvent)this.setState({lastCoordinates:this.toGridSpace(e.clientX,e.clientY)});else{var t=e.touches[0];this.setState({lastCoordinates:this.toGridSpace(t.clientX,t.clientY)})}}},{key:"onEnd",value:function(){null!=this.state.lastCoordinates&&this.props.onEnd(this.state.lastCoordinates),this.setState({lastCoordinates:void 0})}},{key:"onResize",value:function(){var e,t=null===(e=this.boardRef.current)||void 0===e?void 0:e.getBoundingClientRect();if(null!=t){var a,i=64*this.state.gridWidth,n=64*this.state.gridHeight,r=t.width-32,o=t.height-32;a=r/o>i/n?o/n:r/i,this.setState({scale:a})}}},{key:"render",value:function(){var e=this,t=[];y(this.props.gameState.board,(function(a,i){var r={left:64*a+"px",top:64*i+"px"},o="".concat(a,",").concat(i),s=["Board-cell"];null==f(e.props.gameState.board,a,i-1)&&s.push("Board-entry"),t.push(n.a.createElement("div",{className:s.join(" "),style:r,key:o}))}));var a=[],i=function(e,t,i){var r=O[i.type];a.push(n.a.createElement(N,{color:r.baseColor,destroyed:!0,icon:r.icon,id:i.id,key:i.id,scale:64,selected:!1,x:e,y:t,actionDown:function(){},actionMove:function(){},actionUp:function(){}}))};y(this.props.gameState.destroyedThisTick,i),y(this.props.gameState.destroyedLastTick,i),y(this.props.gameState.pieces,(function(t,i,r){var o=O[r.type],s=null!=e.state.lastCoordinates&&e.state.lastCoordinates.x===t&&e.state.lastCoordinates.y===i;a.push(n.a.createElement(N,{color:o.baseColor,destroyed:!1,icon:o.icon,id:r.id,key:r.id,scale:64,selected:s,x:t,y:i,actionDown:e.onStart,actionMove:e.onMove,actionUp:e.onEnd}))}));var r={width:64*this.state.gridWidth,height:64*this.state.gridHeight},o={transform:"scale(".concat(this.state.scale,")")};return n.a.createElement("div",{className:"Board",ref:this.boardRef},n.a.createElement("div",{className:"context",style:o},n.a.createElement("div",{className:"Board-grid",ref:this.gridRef,style:r},t),n.a.createElement("div",{className:"Board-pieces",style:r},a)))}},{key:"toGridSpace",value:function(e,t){var a,i=null===(a=this.gridRef.current)||void 0===a?void 0:a.getBoundingClientRect(),n=null===i||void 0===i?void 0:i.left;if(null==n)throw Error("Could not get left of board ref!");var r=null===i||void 0===i?void 0:i.top;if(null==r)throw Error("Could not get top of board ref!");return{x:Math.floor((e-n)/64/this.state.scale),y:Math.floor((t-r)/64/this.state.scale)}}}]),a}(n.a.Component),z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(s.a)(this,a),(i=t.call(this,e)).lastNumber=new Map,i.aBlipRef=void 0,i.amBlipRef=void 0,i.emBlipRef=void 0,i.gmBlipRef=void 0,i.aBlipRef=n.a.createRef(),i.amBlipRef=n.a.createRef(),i.emBlipRef=n.a.createRef(),i.gmBlipRef=n.a.createRef(),e.engine.initialize(),i.state={gameState:e.engine.state,start:void 0,totalScore:e.engine.state.totalScore,score:e.engine.state.score,multiplier:e.engine.state.multiplier},i.onStart=i.onStart.bind(Object(c.a)(i)),i.onEnd=i.onEnd.bind(Object(c.a)(i)),i}return Object(l.a)(a,[{key:"onStart",value:function(e){return this.setState({start:e}),!1}},{key:"onEnd",value:function(e){var t=this,a=this.props.engine;if(null!=e&&null!=this.state.start&&a.state.settled&&a.move(this.state.start,e)){this.update(a.tick());var i=window.setInterval((function(){t.update(a.tick()),t.state.gameState.settled&&window.clearInterval(i)}),150)}return this.setState({start:void 0}),!1}},{key:"update",value:function(e){var t=[this.aBlipRef,this.amBlipRef,this.emBlipRef,this.gmBlipRef];if(this.props.audio){var a=0;y(e.destroyedThisTick,(function(){a++,window.setTimeout((function(){var e=Math.floor(Math.random()*t.length),i=t[e];if(null!=i&&null!=i.current){var n=i.current.cloneNode(!0);n.volume=1/a,n.play()}}),40*a)}))}this.setState({gameState:e,multiplier:e.multiplier}),this.targetNumber("totalScore",e.totalScore,2e3),0!==e.score?this.targetNumber("score",e.score,200):(this.setState({score:0}),this.lastNumber.set("score",0))}},{key:"targetNumber",value:function(e,t,a){var i=this;if(this.lastNumber.get(e)!==t){var n=(new Date).getTime(),r=this.state[e];window.requestAnimationFrame((function o(){if(i.lastNumber.get(e)===t){var s=((new Date).getTime()-n)/a;if(s>1){var l={};return l[e]=t,void i.setState(l)}var c={};c[e]=Math.floor(i.easeOutCirc(s,r,t-r)),i.setState(c),window.requestAnimationFrame(o)}})),this.lastNumber.set(e,t)}}},{key:"render",value:function(){return n.a.createElement("div",{className:"Game"},n.a.createElement("div",{className:"header"},n.a.createElement("div",{className:"score"},this.state.totalScore),n.a.createElement("div",{className:"space"}),n.a.createElement("div",{className:"score"},this.state.score),n.a.createElement("div",{className:"spacer"}),n.a.createElement("div",{className:"score"},"x",this.state.multiplier)),n.a.createElement(B,{gameState:this.state.gameState,onStart:this.onStart,onEnd:this.onEnd}),n.a.createElement("audio",{ref:this.aBlipRef,src:"aBlip.wav"}),n.a.createElement("audio",{ref:this.amBlipRef,src:"amBlip.wav"}),n.a.createElement("audio",{ref:this.emBlipRef,src:"emBlip.wav"}),n.a.createElement("audio",{ref:this.gmBlipRef,src:"gmBlip.wav"}))}},{key:"easeOutCirc",value:function(e,t,a){return e--,a*Math.sqrt(1-e*e)+t}}]),a}(n.a.Component),T=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(e){var i;return Object(s.a)(this,a),(i=t.call(this,e)).state={audio:!0,gameInSession:!1},i.toggleAudio=i.toggleAudio.bind(Object(c.a)(i)),i.activateLevel=i.activateLevel.bind(Object(c.a)(i)),i.deactivateLevel=i.deactivateLevel.bind(Object(c.a)(i)),i}return Object(l.a)(a,[{key:"toggleAudio",value:function(){this.setState({audio:!this.state.audio})}},{key:"activateLevel",value:function(e){this.setState({level:e,engine:e.generate(),gameInSession:!0})}},{key:"deactivateLevel",value:function(){var e=this;this.setState({gameInSession:!1}),window.setTimeout((function(){e.setState({level:void 0,engine:void 0})}),400)}},{key:"render",value:function(){var e,t,a=["audio"];this.state.audio||a.push("disabled");var i=["browser"],r=["game"];return this.state.gameInSession?(i.push("hidden"),t=n.a.createElement("button",{onClick:this.deactivateLevel},"Back")):r.push("hidden"),null!=this.state.level&&null!=this.state.engine&&(e=n.a.createElement(z,{audio:this.state.audio,engine:this.state.engine})),n.a.createElement("div",{className:"App"},n.a.createElement("header",null,t,n.a.createElement("div",{className:"spacer"}),n.a.createElement("button",{className:a.join(" "),onClick:this.toggleAudio},this.state.audio?"Sound On":"Sound Off")),n.a.createElement(v,null),n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:i.join(" ")},n.a.createElement(C,{activate:this.activateLevel})),n.a.createElement("div",{className:r.join(" ")},e)))}}]),a}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[10,1,2]]]);
//# sourceMappingURL=main.0940ff07.chunk.js.map