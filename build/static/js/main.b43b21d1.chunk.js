(this.webpackJsonpmatch=this.webpackJsonpmatch||[]).push([[0],[,,,,,,,,,function(t,e,n){t.exports=n(18)},,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(8),o=n.n(i),c=(n(14),n(1)),s=n(2),l=n(3),u=n(4),h=n(5),d={display:"none"},p=function(){return r.a.createElement("svg",{width:"64",height:"64",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:d},r.a.createElement("defs",null,r.a.createElement("g",{id:"alpha",fill:"none"},r.a.createElement("circle",{cx:"32",cy:"32",r:"24",stroke:"currentColor",strokeWidth:"4"}),r.a.createElement("circle",{cx:"32",cy:"32",r:"16",stroke:"currentColor",strokeWidth:"4"})),r.a.createElement("path",{id:"beta",d:"M48 12L16 52h32L16 12h32z",fill:"none",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round"}),r.a.createElement("path",{id:"gamma",d:"M34 16a2 2 0 10-4 0h4zM8 38a2 2 0 100 4v-4zm48 4a2 2 0 100-4v4zm-5.59-17.59a2 2 0 10-2.82-2.82l2.82 2.82zm-34-2.82a2 2 0 10-2.82 2.82l2.82-2.82zM8 42h24v-4H8v4zm24 0h24v-4H32v4zm0-16c3.87 0 7.36 1.56 9.9 4.1l2.83-2.83A17.95 17.95 0 0032 22v4zm9.9 4.1A13.95 13.95 0 0146 40h4c0-4.97-2.02-9.47-5.27-12.73L41.9 30.1zm2.83 0l5.68-5.69-2.82-2.82-5.69 5.68 2.83 2.83zM18 40c0-3.87 1.56-7.36 4.1-9.9l-2.83-2.83A17.95 17.95 0 0014 40h4zm4.1-9.9A13.95 13.95 0 0132 26v-4c-4.97 0-9.47 2.02-12.73 5.27l2.83 2.83zm0-2.83l-5.69-5.68-2.82 2.82 5.68 5.69 2.83-2.83zM34 24v-8h-4v8h4z",fill:"currentColor"}),r.a.createElement("path",{id:"delta",d:"M32 12l1.41-1.41a2 2 0 00-2.82 0L32 12zM12 32l-1.41-1.41a2 2 0 000 2.82L12 32zm20 20l-1.41 1.41a2 2 0 002.82 0L32 52zm20-20l1.41 1.41a2 2 0 000-2.82L52 32zM30.59 10.59l-20 20 2.82 2.82 20-20-2.82-2.82zm-20 22.82l20 20 2.82-2.82-20-20-2.82 2.82zm22.82 20l20-20-2.82-2.82-20 20 2.82 2.82zm20-22.82l-20-20-2.82 2.82 20 20 2.82-2.82zM30 12v40h4V12h-4z",fill:"currentColor"})))};n(15);function v(t,e,n){var a=t[e];return null!=a?a[n]:void 0}function f(t,e,n,a){var r=t[e];null==r&&(t[e]={},r=t[e]),r[n]=a}function m(t,e){for(var n in t){var a=t[n];for(var r in a){var i=a[r];null!=i&&e(parseInt(n),parseInt(r),i)}}}n(16);var y=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={visible:!1},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;window.setTimeout((function(){t.setState({visible:!0})}),100)}},{key:"render",value:function(){var t=this.props.scale,e={color:this.props.color,height:t,left:this.props.x*t+"px",top:this.props.y*t+"px",width:t},n="#"+this.props.icon,a=["Piece"];return this.state.visible||a.push("hidden"),r.a.createElement("div",{className:a.join(" "),style:e,onMouseDown:this.props.actionDown,onMouseUp:this.props.actionUp,onTouchStart:this.props.actionDown,onTouchEnd:this.props.actionUp},r.a.createElement("svg",{width:"64",height:"64",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},r.a.createElement("use",{xlinkHref:n})))}}]),n}(r.a.Component),g={alpha:{type:"alpha",icon:"alpha",baseColor:"#0066FF"},beta:{type:"beta",icon:"beta",baseColor:"#FFB800"},gamma:{type:"gamma",icon:"gamma",baseColor:"#EB00FF"},delta:{type:"delta",icon:"delta",baseColor:"#00FFC2"}},w=(n(17),function(t){var e=t.state,n=t.onStart,a=t.onEnd,i=-1/0,o=1/0,c=-1/0,s=1/0,l=[];m(e.board,(function(t,e){var n={left:64*t+"px",top:64*e+"px"},a="".concat(t,",").concat(e);l.push(r.a.createElement("div",{className:"Board-cell",style:n,key:a})),i=Math.max(t,i),c=Math.max(e,c),o=Math.min(t,o),s=Math.min(e,s)}));var u=[];m(e.pieces,(function(t,e,i){var o=g[i.type];u.push(r.a.createElement(y,{key:i.id,color:o.baseColor,icon:o.icon,id:i.id,scale:64,actionDown:function(){return n({x:t,y:e})},actionUp:function(){return a({x:t,y:e})},x:t,y:e}))}));var h={width:64*(i-o+1)+"px",height:64*(c-s+1)+"px"};return r.a.createElement("div",{className:"Board",style:h},r.a.createElement("div",{className:"Board-grid"},l),r.a.createElement("div",{className:"Board-pieces"},u))}),b=function(){function t(e,n,a,r){Object(c.a)(this,t),this.currentState=void 0,this.generator=void 0,this.allowedMoves=void 0,this.matchRules=void 0,this.currentState=e,this.generator=n,this.allowedMoves=a,this.matchRules=r.sort((function(t,e){return e.priority-t.priority}))}return Object(s.a)(t,[{key:"initialize",value:function(){for(console.time();!this.currentState.settled;)this.tick();this.currentState.score=0,console.timeEnd()}},{key:"move",value:function(t,e){var n=this;return!(!0!==this.currentState.settled||!this.allowedMoves.some((function(a){return a(t,e,n.currentState)})))&&(function(t,e,n,a,r){var i=v(t,e,n);f(t,e,n,v(t,a,r)),f(t,a,r,i)}(this.currentState.pieces,t.x,t.y,e.x,e.y),this.currentState.settled=!1,!0)}},{key:"tick",value:function(){var t=this,e=this.state,n=JSON.stringify(e),a=this.state,r=!0,i={};return m(a.board,(function(t,e){if(null==v(a.pieces,t,e))for(;null!=v(a.board,t,e);)f(i,t,e,!0),e-=1})),m(i,(function(n,i){null!=v(a.board,n,i-1)?f(a.pieces,n,i,v(e.pieces,n,i-1)):f(a.pieces,n,i,t.generator({x:n,y:i})),r=!1})),r&&this.matchRules.forEach((function(t){JSON.stringify(a);a=t.apply(a),JSON.stringify(a)})),a.settled=JSON.stringify(a)===n,this.currentState=a,Object.assign({},this.currentState)}},{key:"state",get:function(){return JSON.parse(JSON.stringify(this.currentState))}}]),t}(),x=n(20),S=Object.keys(g),k=function(){var t=Math.floor(Math.random()*S.length);return{id:Object(x.a)(),type:S[t]}},E=[function(t,e,n){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)===1&&(null!=v(n.pieces,t.x,t.y)&&null!=v(n.pieces,e.x,e.y))}],z=n(6);function M(t,e){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];var i=t.pieces;return m(t.board,(function(n,r){var o=v(i,n,r);if(null!=o){var c,s=o.type,l=Object(z.a)(a);try{for(l.s();!(c=l.n()).done;){var u=c.value,h=v(i,n+u.x,r+u.y);if(null==h||h.type!==s)return}}catch(y){l.e(y)}finally{l.f()}var d,p=Object(z.a)(a);try{for(p.s();!(d=p.n()).done;){var m=d.value;f(t.pieces,n+m.x,r+m.y,void 0)}}catch(y){p.e(y)}finally{p.f()}t.score+=e}})),t}var O=[{priority:.1,apply:function(t){return M(t,300,{x:-3,y:0},{x:-2,y:0},{x:-1,y:0},{x:0,y:0}),t}},{priority:.1,apply:function(t){return M(t,300,{x:0,y:-3},{x:0,y:-2},{x:0,y:-1},{x:0,y:0}),t}},{priority:0,apply:function(t){return M(t,100,{x:-2,y:0},{x:-1,y:0},{x:0,y:0}),t}},{priority:0,apply:function(t){return M(t,100,{x:0,y:-2},{x:0,y:-1},{x:0,y:0}),t}}],j=function(t){Object(h.a)(n,t);var e=Object(u.a)(n);function n(t){var a;Object(c.a)(this,n),a=e.call(this,t);var r=new b({board:{0:{1:!0,2:!0,3:!0},1:{0:!0,1:!0,2:!0,3:!0,4:!0},2:{0:!0,1:!0,2:!0,3:!0,4:!0},3:{0:!0,1:!0,2:!0,3:!0,4:!0},4:{1:!0,2:!0,3:!0}},score:0,pieces:[],settled:!1},k,E,O);return r.initialize(),a.state={engine:r,gameState:r.state,start:void 0},a.onStart=a.onStart.bind(Object(l.a)(a)),a.onEnd=a.onEnd.bind(Object(l.a)(a)),a}return Object(s.a)(n,[{key:"onStart",value:function(t){this.setState({start:t})}},{key:"onEnd",value:function(t){var e=this,n=this.state.engine;if(null!=t&&null!=this.state.start&&n.state.settled&&n.move(this.state.start,t)){this.setState({gameState:n.state}),this.forceUpdate();var a=window.setInterval((function(){e.setState({gameState:n.tick()}),e.forceUpdate(),e.state.gameState.settled&&window.clearInterval(a)}),200)}this.setState({start:void 0})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,null),r.a.createElement("div",{className:"score"},this.state.gameState.score),r.a.createElement(w,{state:this.state.gameState,onStart:this.onStart,onEnd:this.onEnd}))}}]),n}(r.a.Component),C=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function N(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),function(t){if("serviceWorker"in navigator){if(new URL("/match/build",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/match/build","/service-worker.js");C?(!function(t,e){fetch(t,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):N(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):N(e,t)}))}}()}],[[9,1,2]]]);
//# sourceMappingURL=main.b43b21d1.chunk.js.map